{"ast":null,"code":"import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nimport firebaseConfig from './firebase.config.js';\nexport const initialzeLoginFramework = () => {\n  firebase.initializeApp(firebaseConfig);\n};\nexport const handleGoogleSignIn = () => {\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  return firebase.auth().signInWithPopup(googleProvider).then(res => {\n    console.log(res);\n    const {\n      email,\n      name,\n      picture\n    } = res.additionalUserInfo.profile;\n    const signnedInUser = {\n      isSignnedIn: true,\n      name: name,\n      email: email,\n      photo: picture\n    };\n    return signnedInUser;\n    console.log(email, name, picture);\n  }).catch(err => {\n    console.log(err);\n    console.log(err.message);\n  });\n};\nexport const handleFbSignIn = () => {\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n  firebase.auth().signInWithPopup(fbProvider).then(result => {\n    /** @type {firebase.auth.OAuthCredential} */\n    var credential = result.credential;\n\n    // The signed-in user info.\n    var user = result.user;\n    console.log(\"FB User after sign in: \", user);\n    // IdP data available in result.additionalUserInfo.profile.\n    // ...\n\n    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n    var accessToken = credential.accessToken;\n\n    // ...\n  }).catch(error => {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    // The email of the user's account used.\n    var email = error.email;\n    // The firebase.auth.AuthCredential type that was used.\n    var credential = error.credential;\n\n    // ...\n  });\n};\n\nconst handleSignOut = () => {\n  return firebase.auth().signOut().then(res => {\n    const signedOutUser = {\n      isSignnedIn: false,\n      name: '',\n      photo: '',\n      email: '',\n      error: '',\n      success: false\n    };\n    setUser(signedOutUser);\n    console.log(res);\n  }).catch(err => {});\n};\nexport const createUserWithEmailAndPassword = () => {\n  firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n    const newUserInfo = {\n      ...user\n    };\n    newUserInfo.error = \"\";\n    newUserInfo.success = true;\n    setUser(newUserInfo);\n    //console.log(res);\n    updateUserName(user.name);\n  }).catch(error => {\n    const newUserInfo = {\n      ...user\n    };\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    setUser(newUserInfo);\n    var errorMessage = error.message;\n    console.log(errorMessage);\n  });\n};\nexport const signInWithEmailAndPassword = () => {\n  firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n    const newUserInfo = {\n      ...user\n    };\n    newUserInfo.error = \"\";\n    newUserInfo.success = true;\n    setUser(newUserInfo);\n    setLoggedInUser(newUserInfo);\n    history.replace(from);\n    console.log(\"Sign in user info\", res.user);\n  }).catch(error => {\n    const newUserInfo = {\n      ...user\n    };\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    setUser(newUserInfo);\n  });\n};\nconst updateUserName = name => {\n  const user = firebase.auth().currentUser;\n  user.updateProfile({\n    displayName: name\n  }).then(() => {\n    console.log(\"User name updated successfully!\");\n  }).catch(error => {\n    console.log(error);\n  });\n};","map":{"version":3,"names":["firebase","firebaseConfig","initialzeLoginFramework","initializeApp","handleGoogleSignIn","googleProvider","auth","GoogleAuthProvider","signInWithPopup","then","res","console","log","email","name","picture","additionalUserInfo","profile","signnedInUser","isSignnedIn","photo","catch","err","message","handleFbSignIn","fbProvider","FacebookAuthProvider","result","credential","user","accessToken","error","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","success","setUser","createUserWithEmailAndPassword","password","newUserInfo","updateUserName","signInWithEmailAndPassword","setLoggedInUser","history","replace","from","currentUser","updateProfile","displayName"],"sources":["F:/web development/web development/course web development/practise/module 34 (ema-john project with firebase)/ema-john-simple firebase/src/components/Login/loginManager.js"],"sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/firestore';\r\nimport firebaseConfig from './firebase.config.js';\r\n\r\n\r\nexport const initialzeLoginFramework = () => {\r\n\r\n    firebase.initializeApp(firebaseConfig);\r\n\r\n}\r\n\r\nexport const handleGoogleSignIn= ()=> {\r\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n    return firebase.auth().signInWithPopup(googleProvider)\r\n    .then(res => {   \r\n    console.log(res);\r\n    const {email,name,picture}= res.additionalUserInfo.profile\r\n    const signnedInUser = {\r\n        isSignnedIn : true,\r\n        name: name,\r\n        email: email,\r\n        photo: picture,\r\n    }\r\n    return signnedInUser;\r\n    console.log(email, name, picture);\r\n    })\r\n    .catch (err => {\r\n    console.log(err);\r\n    console.log(err.message);\r\n    })\r\n}\r\n\r\n\r\n\r\nexport  const handleFbSignIn = () =>{\r\n    const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n    firebase\r\n    .auth()\r\n    .signInWithPopup(fbProvider)\r\n    .then((result) => {\r\n        /** @type {firebase.auth.OAuthCredential} */\r\n        var credential = result.credential;\r\n\r\n        // The signed-in user info.\r\n        var user = result.user;\r\n        console.log(\"FB User after sign in: \",user);\r\n        // IdP data available in result.additionalUserInfo.profile.\r\n        // ...\r\n\r\n        // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n        var accessToken = credential.accessToken;\r\n\r\n        // ...\r\n    })\r\n    .catch((error) => {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // The email of the user's account used.\r\n        var email = error.email;\r\n        // The firebase.auth.AuthCredential type that was used.\r\n        var credential = error.credential;\r\n\r\n        // ...\r\n    });\r\n\r\n\r\n}\r\n\r\nconst handleSignOut = () => {\r\n    return firebase.auth().signOut()\r\n    .then (res => {\r\n        const signedOutUser = {\r\n            isSignnedIn: false,\r\n            name: '',\r\n            photo: '',\r\n            email:'',\r\n            error:'',\r\n            success: false,\r\n        }\r\n        setUser(signedOutUser);\r\n        console.log(res);\r\n    })\r\n    .catch(err => {\r\n\r\n    })\r\n}\r\n\r\n\r\nexport const createUserWithEmailAndPassword = () => {\r\n\r\n    firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\r\n                .then (res => {\r\n                const newUserInfo = {...user};\r\n                newUserInfo.error=\"\";\r\n                newUserInfo.success = true;\r\n                setUser(newUserInfo);\r\n                //console.log(res);\r\n                updateUserName(user.name);\r\n            })\r\n            .catch(error => {\r\n                const newUserInfo= {...user};\r\n                newUserInfo.error = error.message;\r\n                newUserInfo.success = false;\r\n                setUser(newUserInfo);\r\n                var errorMessage = error.message;\r\n                console.log(errorMessage);\r\n            });\r\n}\r\n\r\n\r\nexport const signInWithEmailAndPassword=() => {\r\n\r\n    firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n    .then (res => {\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error=\"\";\r\n        newUserInfo.success = true;\r\n        setUser(newUserInfo);\r\n        setLoggedInUser(newUserInfo);\r\n        history.replace(from);\r\n        console.log(\"Sign in user info\",res.user);\r\n    })\r\n    .catch((error) => {\r\n        const newUserInfo= {...user};\r\n        newUserInfo.error = error.message;\r\n        newUserInfo.success = false;\r\n        setUser(newUserInfo);\r\n    });\r\n\r\n}\r\n\r\nconst updateUserName= name => {\r\n\r\n    const user = firebase.auth().currentUser;\r\n\r\n            user.updateProfile({\r\n            displayName: name\r\n            }).then(() => {\r\n            console.log(\"User name updated successfully!\")\r\n            }).catch((error) => {\r\n            console.log(error)\r\n            });  \r\n\r\n}\r\n \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}